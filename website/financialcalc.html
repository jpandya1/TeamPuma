<!DOCTYPE html>
<html>
<!-- This page is the Financial Calculator of our site
This will include a calculator to keep track
of the financial value of the items the user has recycled.
-->
	<head>
		<title>Financial Calculator </title>
		<link rel="stylesheet" href="./stylesheet.css">

	</head>

	<body>

		<div id="navigationBanner">
    		<ul>
    			<li><a href="./splashpage.html">Home</a></li>
    			<li><a href="https://www.google.com/">Contact</a></li>
    			<li><a href="./about.html">About</a></li>
    			<li><a href="./searchpage.html">Search</a></li>
    		</ul>
    	</div>

    	<div id="titleBanner">
    		<div id="titleBannerImage">
    			<img src="images/recycle_image1.png" alt="image0" height="100">
    		</div>
    		<div id="titleBannerText">
    			<h1>Green Routine</h1>
    			<h2>Empowering users to recycle responsibly</h2>
    		</div>
    	</div>

		<h2 id="calcTitle">Calculate your cash returns based on traded-in recyclables</h2>

		<p id="calcSubTitle">Insert your recyclables info here</p>
		<div id="calcInput">
			<form action="">
				Material type:<br>
				<input id="materialInput" type="text"/>
				<br>Cash return ($):<br>
				<input id="costInput" type="text"/>
				<br>Weight (lbs):<br>
				<input id="weightInput" type="text"/>
				<br>
				<input id="submitButton" type="submit" value="Submit" onclick = "return addRow();"/>
			</form>
		</div>

		<div id="calcTableBox">
			<table id="calcTable">
				<tr>
					<th>Material</th>
					<th>Cash Return ($)</th>
					<th>Weight (lbs)</th>
					<th>$/lb</th>
					<th>Actions</th>
				</tr>
				<!-- hard-coded values below are used as an example for the user (which can be deleted by the user) -->
				<tr id="row1">
					<td>Plastic #1 (Clear Plastic)</td>
					<td>1.28</td>
					<td>2 lbs</td>
					<td>0.6400</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('1');">
					</td>
				</tr>
				<tr id="row2">
					<td>Plastic #2 (Opaque Plastic)</td>
					<td>0.58</td>
					<td>3 lbs</td>
					<td>0.1450</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('2');">
					</td>
				</tr>
				<tr id="row3">
					<td>Glass</td>
					<td>0.10</td>
					<td>6 lbs</td>
					<td>0.01667</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('3');">
					</td>
				</tr>
				<tr id="row4">
					<td>Aluminum</td>
					<td>0.30</td>
					<td>1.5 lbs</td>
					<td>0.2000</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('4');">
					</td>
				</tr>
				<tr id="row5">
					<td>Copper</td>
					<td>2.57</td>
					<td>2.5 lbs</td>
					<td>1.0280</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('5');">
					</td>
				</tr>
				<tr id="row6">
					<td>Cardboard</td>
					<td>0.61</td>
					<td>3.75 lbs</td>
					<td>0.1627</td>
					<td>
						<input id="delete_button1" type="button" value="Delete" class="delete" onclick="delete_row('6');">
					</td>
				</tr>
			</table>
		</div>

		<div>
			<p id="totalCost">Total cash return: $5.44</p>
		</div>

	</body>

	<script>
		var total = 5.44; //default value based on example recyclables

		function addRow() {
			var table = document.getElementById("calcTable");
			var table_length = (table.rows.length) /*- 1*/;
			var row = table.insertRow(table.rows.length);
			/*var c1 = row.insertCell(0);
			var c2 = row.insertCell(1);
			var c3 = row.insertCell(2);
			var c4 = row.insertCell(3);
			var c5 = row.insertCell(4);*/

			var new_material = document.getElementById("materialInput").value;
			var new_cost = "$" + document.getElementById("costInput").value;
			var new_weight = document.getElementById("weightInput").value + " lbs";
			var new_ratio = parseFloat(document.getElementById("costInput").value, 10) / parseFloat(document.getElementById("weightInput").value, 10);
			row.outerHTML = "<tr id='row" + table_length + "'><td>" + new_material + "</td><td>" + new_cost + "</td><td>" + new_weight + "</td><td>" + new_ratio + "</td><td><input type='button' value='Delete' class='delete' onclick='delete_row(" + table_length + ")'></td></tr>";
			/*c1.innerHTML = document.getElementById("materialInput").value;
			c2.innerHTML = "$" + document.getElementById("costInput").value;
			c3.innerHTML = document.getElementById("weightInput").value + " lbs";
			c4.innerHTML = document.getElementById("costInput").value + "/" + document.getElementById("weightInput").value;
			c5.outerHTML = "<td><input type='button' value='Delete' class='delete' onclick='delete_row(" + table_length + ")'></td>";*/

			total = total + parseFloat(document.getElementById("costInput").value, 10);

			document.getElementById("totalCost").innerHTML = "Total cash return: $" + total;
			return false;
		}

		/*function deleteRow() {
			var table = document.getElementById("calcTable");
			var row = table.removeRow(table.rows.length);
			var c1 = row.removeCell(0);
			var c2 = row.removeCell(1);
			var c3 = row.removeCell(2);
			var c4 = row.removeCell(3);
			var c5 = row.insertCell(4);
		}*/

		function delete_row(num) {
			total = total - parseFloat(document.getElementById("row" + num + "").childNodes[1].value, 10);
			document.getElementById("totalCost").innerHTML = "Total cash return: $" + total;				//FIX: deletion causes NaN

			document.getElementById("row" + num + "").outerHTML = "";
			data.labels.splice(num-1,1);
			data.population.splice(num-1,1);
			data.area.splice(num-1,1);
		}

	</script>

</html>
